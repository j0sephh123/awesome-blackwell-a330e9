(window.webpackJsonpnetlify_cms=window.webpackJsonpnetlify_cms||[]).push([[1],{1379:function(e,t,n){"use strict";n.r(t);var r=n(0),l=n.n(r),i=n(1),a=n.n(i),o=n(7),c=n.n(o),s=n(4),d=n(96),p=n(3),u=n(55),g=n(19),b=n(1448),h=n(323);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f={sidebarNavLinkActive:Object(s.css)("color:",p.colors.active,";background-color:",p.colors.activeBackground,";border-left-color:#4863c6;label:sidebarNavLinkActive;")},v=Object(s.default)("aside",{label:"SidebarContainer",target:"eki02dl0"})(p.components.card,";width:250px;padding:8px 0 12px;position:fixed;max-height:calc(100vh - 112px);overflow:auto;"),x=Object(s.default)("h2",{label:"SidebarHeading",target:"eki02dl1"})("font-size:23px;font-weight:600;padding:0;margin:18px 12px 12px;color:",p.colors.textLead,";"),y=Object(s.default)("div",{label:"SearchContainer",target:"eki02dl2"})("display:flex;align-items:center;margin:0 12px;position:relative;",p.Icon,"{position:absolute;top:0;left:6px;z-index:2;height:100%;display:flex;align-items:center;pointer-events:none;}"),w=Object(s.default)("input",{label:"SearchInput",target:"eki02dl3"})("background-color:#eff0f4;border-radius:",p.lengths.borderRadius,";font-size:14px;padding:10px 6px 10px 32px;width:100%;position:relative;z-index:1;&:focus{outline:none;box-shadow:inset 0 0 0 2px ",p.colorsRaw.blue,";}"),E=Object(s.default)("ul",{label:"SidebarNavList",target:"eki02dl4"})("margin:16px 0 0;list-style:none;");const C=Object(s.default)(b.a,{label:"SidebarNavLink",target:"eki02dl5"})("display:flex;font-size:14px;font-weight:500;align-items:center;padding:8px 12px;border-left:2px solid #fff;",p.Icon,"{margin-right:8px;}",e=>Object(s.css)("&:hover,&:active,&.",e.activeClassName,"{",f.sidebarNavLinkActive,";}label:SidebarNavLink;"),";");class S extends l.a.Component{constructor(...e){super(...e),m(this,"state",{query:this.props.searchTerm}),m(this,"renderLink",e=>{const t=e.get("name");return l.a.createElement("li",{key:t},l.a.createElement(C,{to:`/collections/${t}`,activeClassName:"sidebar-active"},l.a.createElement(p.Icon,{type:"write"}),e.get("label")))})}render(){const e=this.props,t=e.collections,n=e.t,r=this.state.query;return l.a.createElement(v,null,l.a.createElement(x,null,n("collection.sidebar.collections")),l.a.createElement(y,null,l.a.createElement(p.Icon,{type:"search",size:"small"}),l.a.createElement(w,{onChange:e=>this.setState({query:e.target.value}),onKeyDown:e=>"Enter"===e.key&&Object(h.b)(r),placeholder:n("collection.sidebar.searchAll"),value:r})),l.a.createElement(E,null,t.toList().map(this.renderLink)))}}m(S,"propTypes",{collections:c.a.orderedMap.isRequired,searchTerm:a.a.string,t:a.a.func.isRequired}),m(S,"defaultProps",{searchTerm:""});var j=Object(g.translate)()(S),O=n(997);const k="VIEW_STYLE_LIST",F=Object(s.default)("div",{label:"CollectionTopContainer",target:"eiklheg0"})(p.components.cardTop,";"),T=Object(s.default)("div",{label:"CollectionTopRow",target:"eiklheg1"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;"),L=Object(s.default)("h1",{label:"CollectionTopHeading",target:"eiklheg2"})(p.components.cardTopHeading,";"),R=Object(s.default)(O.a,{label:"CollectionTopNewButton",target:"eiklheg3"})(p.buttons.button,";",p.shadows.dropDeep,";",p.buttons.default,";",p.buttons.gray,";padding:0 30px;"),q=Object(s.default)("p",{label:"CollectionTopDescription",target:"eiklheg4"})(p.components.cardTopDescription,";"),I=Object(s.default)("div",{label:"ViewControls",target:"eiklheg5"})("display:flex;align-items:center;justify-content:flex-end;margin-top:24px;"),z=Object(s.default)("span",{label:"ViewControlsText",target:"eiklheg6"})("font-size:14px;color:",p.colors.text,";margin-right:12px;"),A=Object(s.default)("button",{label:"ViewControlsButton",target:"eiklheg7"})(p.buttons.button,";color:",e=>e.isActive?p.colors.active:"#b3b9c4",";background-color:transparent;display:block;padding:0;margin:0 4px;&:last-child{margin-right:0;}",p.Icon,"{display:block;}"),_=({collectionLabel:e,collectionLabelSingular:t,collectionDescription:n,viewStyle:r,onChangeViewStyle:i,newEntryUrl:a,t:o})=>l.a.createElement(F,null,l.a.createElement(T,null,l.a.createElement(L,null,e),a?l.a.createElement(R,{to:a},o("collection.collectionTop.newButton",{collectionLabel:t||e})):null),n?l.a.createElement(q,null,n):null,l.a.createElement(I,null,l.a.createElement(z,null,o("collection.collectionTop.viewAs"),":"),l.a.createElement(A,{isActive:r===k,onClick:()=>i(k)},l.a.createElement(p.Icon,{type:"list"})),l.a.createElement(A,{isActive:"VIEW_STYLE_GRID"===r,onClick:()=>i("VIEW_STYLE_GRID")},l.a.createElement(p.Icon,{type:"grid"}))));_.propTypes={collectionLabel:a.a.string.isRequired,collectionLabelSingular:a.a.string,collectionDescription:a.a.string,viewStyle:a.a.oneOf([k,"VIEW_STYLE_GRID"]).isRequired,onChangeViewStyle:a.a.func.isRequired,newEntryUrl:a.a.string,t:a.a.func.isRequired};var N=Object(g.translate)()(_),D=n(29),V=n.n(D),M=n(5),P=n(18),G=n(28),U=n(202),W=n(427),B=n(2),Y=n(20);const H=Object(s.default)("li",{label:"ListCard",target:"es9wz090"})(p.components.card,";width:",p.lengths.topCardWidth,";margin-left:12px;margin-bottom:16px;"),$=Object(s.default)(O.a,{label:"ListCardLink",target:"es9wz091"})("display:block;max-width:100%;padding:16px 22px;&:hover{background-color:",p.colors.foreground,";}"),J=Object(s.default)("li",{label:"GridCard",target:"es9wz092"})(p.components.card,";flex:0 0 335px;height:240px;overflow:hidden;margin-left:12px;margin-bottom:16px;"),K=Object(s.default)(O.a,{label:"GridCardLink",target:"es9wz093"})("display:block;&,&:hover{background-color:",p.colors.foreground,";color:",p.colors.text,";}"),Q=Object(s.default)("h2",{label:"CollectionLabel",target:"es9wz094"})("font-size:12px;color:",p.colors.textLead,";text-transform:uppercase;"),X=Object(s.default)("h2",{label:"ListCardTitle",target:"es9wz095"})("margin-bottom:0;"),Z=Object(s.default)("h2",{label:"CardHeading",target:"es9wz096"})("margin:0 0 2px;"),ee=Object(s.default)("div",{label:"CardBody",target:"es9wz097"})("padding:16px 22px;height:90px;position:relative;margin-bottom:",e=>e.hasImage&&0,";&:after{content:'';position:absolute;display:block;z-index:1;bottom:0;left:-20%;height:140%;width:140%;box-shadow:inset 0 -15px 24px ",p.colorsRaw.white,";}"),te=Object(s.default)("div",{label:"CardImage",target:"es9wz098"})("background-image:url(",e=>e.url,");background-position:center center;background-size:cover;background-repeat:no-repeat;height:150px;");var ne=({collection:e,entry:t,inferedFields:n,publicFolder:r,collectionLabel:i,viewStyle:a=k})=>{const o=t.get("label")||t.getIn(["data",n.titleField]),c=`/collections/${e.get("name")}/entries/${t.get("slug")}`;let s=t.getIn(["data",n.imageField]);return(s=Object(M.resolvePath)(s,r))&&(s=encodeURI(s)),a===k?l.a.createElement(H,null,l.a.createElement($,{to:c},i?l.a.createElement(Q,null,i):null,l.a.createElement(X,null,o))):"VIEW_STYLE_GRID"===a?l.a.createElement(J,null,l.a.createElement(K,{to:c},l.a.createElement(ee,{hasImage:s},i?l.a.createElement(Q,null,i):null,l.a.createElement(Z,null,o)),s?l.a.createElement(te,{url:s}):null)):void 0};function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ie=Object(s.default)("ul",{label:"CardsGrid",target:"e1amnj7z0"})("display:flex;flex-flow:row wrap;list-style-type:none;margin-left:-12px;");class ae extends l.a.Component{constructor(...e){super(...e),le(this,"handleLoadMore",()=>{const e=this.props,t=e.cursor,n=e.handleCursorActions;M.Cursor.create(t).actions.has("append_next")&&n("append_next")}),le(this,"inferFields",e=>{const t=Object(Y.i)(e,"title"),n=Object(Y.i)(e,"description"),r=Object(Y.i)(e,"image"),l=Object(Y.f)(e),i=[t,n,r];return{titleField:t,descriptionField:n,imageField:r,remainingFields:l&&l.filter(e=>-1===i.indexOf(e.get("name")))}}),le(this,"renderCardsForSingleCollection",()=>{const e=this.props,t=e.collections,n=e.entries,r=e.publicFolder,i=e.viewStyle,a={collection:t,inferedFields:this.inferFields(t),publicFolder:r,viewStyle:i};return n.map((e,t)=>l.a.createElement(ne,re({},a,{entry:e,key:t})))}),le(this,"renderCardsForMultipleCollections",()=>{const e=this.props,t=e.collections,n=e.entries,r=e.publicFolder;return n.map((e,n)=>{const i=e.get("collection"),a=t.find(e=>e.get("name")===i),o=a.get("label"),c={collection:a,entry:e,inferedFields:this.inferFields(a),publicFolder:r,collectionLabel:o};return l.a.createElement(ne,re({},c,{key:n}))})})}render(){const e=this.props.collections;return l.a.createElement("div",null,l.a.createElement(ie,null,B.Map.isMap(e)?this.renderCardsForSingleCollection():this.renderCardsForMultipleCollections(),l.a.createElement(W.a,{onEnter:this.handleLoadMore})))}}le(ae,"propTypes",{publicFolder:a.a.string.isRequired,collections:c.a.iterable.isRequired,entries:c.a.list,viewStyle:a.a.string,cursor:a.a.any.isRequired,handleCursorActions:a.a.func.isRequired});const oe=({collections:e,entries:t,publicFolder:n,isFetching:r,viewStyle:i,cursor:a,handleCursorActions:o,t:c})=>{const s=[c("collection.entries.loadingEntries"),c("collection.entries.cachingEntries"),c("collection.entries.longerLoading")];return t?l.a.createElement(ae,{collections:e,entries:t,publicFolder:n,viewStyle:i,cursor:a,handleCursorActions:o}):r?l.a.createElement(p.Loader,{active:!0},s):l.a.createElement("div",{className:"nc-collectionPage-noEntries"},"No Entries")};oe.propTypes={collections:c.a.map.isRequired,entries:c.a.list,publicFolder:a.a.string.isRequired,page:a.a.number,isFetching:a.a.bool,viewStyle:a.a.string,cursor:a.a.any.isRequired,handleCursorActions:a.a.func.isRequired,t:a.a.func.isRequired};var ce=Object(g.translate)()(oe);function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class de extends l.a.Component{constructor(...e){super(...e),se(this,"handleCursorActions",(e,t)=>{const n=this.props,r=n.collection;(0,n.traverseCollectionCursor)(r,t)})}componentDidMount(){const e=this.props,t=e.collection,n=e.entriesLoaded,r=e.loadEntries;t&&!n&&r(t)}componentDidUpdate(e){const t=this.props,n=t.collection,r=t.entriesLoaded,l=t.loadEntries;n===e.collection||r||l(n)}render(){const e=this.props,t=e.collection,n=e.entries,r=e.publicFolder,i=e.isFetching,a=e.viewStyle,o=e.cursor;return l.a.createElement(ce,{collections:t,entries:n,publicFolder:r,isFetching:i,collectionName:t.get("label"),viewStyle:a,cursor:o,handleCursorActions:V()(this.handleCursorActions,o)})}}se(de,"propTypes",{collection:c.a.map.isRequired,publicFolder:a.a.string.isRequired,entries:c.a.list,isFetching:a.a.bool.isRequired,viewStyle:a.a.string,cursor:a.a.object.isRequired,loadEntries:a.a.func.isRequired,traverseCollectionCursor:a.a.func.isRequired});const pe={loadEntries:P.x,traverseCollectionCursor:P.A};var ue=Object(d.b)(function(e,t){const n=t.collection,r=t.viewStyle,l=e.config.get("public_folder"),i=e.entries.getIn(["pages",n.get("name"),"page"]),a=Object(G.c)(e,n.get("name")),o=!!e.entries.getIn(["pages",n.get("name")]),c=e.entries.getIn(["pages",n.get("name"),"isFetching"],!1),s=Object(U.b)(e.cursors,n.get("name"));return{publicFolder:l,collection:n,page:i,entries:a,entriesLoaded:o,isFetching:c,viewStyle:r,cursor:M.Cursor.create(s).clearData()}},pe)(de),ge=n(83);function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class he extends l.a.Component{constructor(...e){super(...e),be(this,"getCursor",()=>{const e=this.props.page;return M.Cursor.create({actions:isNaN(e)?[]:["append_next"]})}),be(this,"handleCursorActions",e=>{const t=this.props,n=t.page,r=t.searchTerm,l=t.searchEntries;if("append_next"===e){l(r,n+1)}})}componentDidMount(){const e=this.props,t=e.searchTerm;(0,e.searchEntries)(t)}componentDidUpdate(e){if(e.searchTerm===this.props.searchTerm)return;(0,e.searchEntries)(this.props.searchTerm)}componentWillUnmount(){this.props.clearSearch()}render(){const e=this.props,t=e.collections,n=e.entries,r=e.publicFolder,i=e.isFetching;return l.a.createElement(ce,{cursor:this.getCursor(),handleCursorActions:this.handleCursorActions,collections:t,entries:n,publicFolder:r,isFetching:i})}}be(he,"propTypes",{isFetching:a.a.bool,searchEntries:a.a.func.isRequired,clearSearch:a.a.func.isRequired,searchTerm:a.a.string.isRequired,collections:c.a.seq,entries:c.a.list,page:a.a.number,publicFolder:a.a.string});const me={searchEntries:ge.h,clearSearch:ge.f};var fe=Object(d.b)(function(e,t){const n=t.searchTerm,r=t.collections.toIndexedSeq();return{isFetching:e.search.get("isFetching"),page:e.search.get("page"),collections:r,entries:Object(G.f)(e),publicFolder:e.config.get("public_folder"),searchTerm:n}},me)(he);function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const xe=Object(s.default)("div",{label:"CollectionContainer",target:"e14d2hok0"})("margin:",p.lengths.pageMargin,";"),ye=Object(s.default)("main",{label:"CollectionMain",target:"e14d2hok1"})("padding-left:280px;");class we extends l.a.Component{constructor(...e){super(...e),ve(this,"state",{viewStyle:k}),ve(this,"renderEntriesCollection",()=>{const e=this.props.collection;return l.a.createElement(ue,{collection:e,viewStyle:this.state.viewStyle})}),ve(this,"renderEntriesSearch",()=>{const e=this.props,t=e.searchTerm,n=e.collections;return l.a.createElement(fe,{collections:n,searchTerm:t})}),ve(this,"handleChangeViewStyle",e=>{this.state.viewStyle!==e&&this.setState({viewStyle:e})})}render(){const e=this.props,t=e.collection,n=e.collections,r=e.collectionName,i=e.isSearchResults,a=e.searchTerm,o=t.get("create")?Object(u.c)(r):"";return l.a.createElement(xe,null,l.a.createElement(j,{collections:n,searchTerm:a}),l.a.createElement(ye,null,i?null:l.a.createElement(N,{collectionLabel:t.get("label"),collectionLabelSingular:t.get("label_singular"),collectionDescription:t.get("description"),newEntryUrl:o,viewStyle:this.state.viewStyle,onChangeViewStyle:this.handleChangeViewStyle}),i?this.renderEntriesSearch():this.renderEntriesCollection()))}}ve(we,"propTypes",{searchTerm:a.a.string,collectionName:a.a.string,isSearchResults:a.a.bool,collection:c.a.map.isRequired,collections:c.a.orderedMap.isRequired});t.default=Object(d.b)(function(e,t){const n=e.collections,r=t.isSearchResults,l=t.match.params,i=l.name,a=l.searchTerm;return{collection:i?n.get(i):n.first(),collections:n,collectionName:i,isSearchResults:r,searchTerm:a}})(we)}}]);
//# sourceMappingURL=1.cms.js.map